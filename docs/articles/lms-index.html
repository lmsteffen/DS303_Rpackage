<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="lmstt">
<title>lms-index • lmstt</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="lms-index">
<meta property="og:description" content="lmstt">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lmstt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/lms-index.html">lms-index</a>
    <a class="dropdown-item" href="../articles/tom-index.html">tom-index</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="lms-index_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="lms-index_files/plotly-binding-4.10.0/plotly.js"></script><script src="lms-index_files/typedarray-0.1/typedarray.min.js"></script><link href="lms-index_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="lms-index_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="lms-index_files/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="lms-index_files/plotly-main-2.5.1/plotly-latest.min.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>lms-index</h1>
            
      
      
      <div class="d-none name"><code>lms-index.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">lmstt</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The data came from the <a href="https://www.bts.gov/content/petroleum-oil-spills-impacting-navigable-us-waters" class="external-link">Bureau of Transportation Statistics</a>. Only the pollution incidents where the Coast Guard investigated as the lead agency are included in this dataset. Data on spills where the Environmental Protection Agency or any of the state authorities are the lead agency is not included. These are mostly offshore spills as the EPA usually handles inshore spills. These statistics cover yearly gallons spilled, number of incidents, and source type from 1985, 1990, 1995-2020.</p>
</div>
<div class="section level2">
<h2 id="vessel-non-vessel-and-mystery-sources">Vessel, Non-Vessel, and Mystery Sources<a class="anchor" aria-label="anchor" href="#vessel-non-vessel-and-mystery-sources"></a>
</h2>
<div class="section level3">
<h3 id="gallons-spilled">Gallons Spilled<a class="anchor" aria-label="anchor" href="#gallons-spilled"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">oilSpills</span> |&gt; <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Source</span> <span class="op">==</span> <span class="st">"Vessel sources, total"</span> <span class="op">|</span> 
                     <span class="va">Source</span> <span class="op">==</span> <span class="st">"Nonvessel sources, total"</span><span class="op">|</span>
                     <span class="va">Source</span> <span class="op">==</span> <span class="st">"Mysteryc"</span><span class="op">)</span> |&gt; 
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="va">Year</span>, y <span class="op">=</span><span class="op">~</span><span class="va">`Gallons spilled`</span>, color <span class="op">=</span> <span class="op">~</span><span class="va">Source</span>, type<span class="op">=</span><span class="st">"bar"</span>, colors <span class="op">=</span> 
            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#a6cee3"</span>, <span class="st">"#1f78b4"</span>, <span class="st">"#b2df8a"</span><span class="op">)</span>,
           width <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fixedrange <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
         updatemenus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
              type <span class="op">=</span> <span class="st">"buttons"</span>,
              x <span class="op">=</span> <span class="fl">0.6</span>,
              y <span class="op">=</span> <span class="fl">1</span>,
              direction <span class="op">=</span> <span class="st">"right"</span>,
              buttons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
                
                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"relayout"</span>,
                args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"barmode"</span>,<span class="st">"dodge"</span><span class="op">)</span>,
                label <span class="op">=</span> <span class="st">"Grouped"</span><span class="op">)</span>,

                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"relayout"</span>,
                args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"barmode"</span>,<span class="st">"stack"</span><span class="op">)</span>,
                label <span class="op">=</span> <span class="st">"Stacked"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

                
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-fc07b9706ec53077e5a6" style="width:1000px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fc07b9706ec53077e5a6">{"x":{"visdat":{"2729342ad933f":["function () ","plotlyVisDat"]},"cur_data":"2729342ad933f","attrs":{"2729342ad933f":{"x":{},"y":{},"color":{},"colors":["#a6cee3","#1f78b4","#b2df8a"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"width":1000,"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"fixedrange":false,"title":"`Gallons spilled`"},"updatemenus":[{"type":"buttons","x":0.6,"y":1,"direction":"right","buttons":[{"method":"relayout","args":["barmode","dodge"],"label":"Grouped"},{"method":"relayout","args":["barmode","stack"],"label":"Stacked"}]}],"xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[323108,119377,55854,28508,60430,17352,44593,23966,14141,190630,96819,39700,30126,128517,30279,26564,30667.4,8718,7849,13157,6091,8581,1934.5,3753.9,4868,1288,13284,506],"type":"bar","name":"Mysteryc","marker":{"color":"rgba(166,206,227,1)","line":{"color":"rgba(166,206,227,1)"}},"textfont":{"color":"rgba(166,206,227,1)"},"error_y":{"color":"rgba(166,206,227,1)"},"error_x":{"color":"rgba(166,206,227,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[3250229,1408472,958222,1408303,501265,246716,551381,373761,270523,200871,93515,70456,7771646,2290803,439723,197525,54275.4,206809141,94759,51040,284513,386350,63027.2999999999,59318.1,22183,206173,230093,108265],"type":"bar","name":"Nonvessel sources, total","marker":{"color":"rgba(31,120,180,1)","line":{"color":"rgba(31,120,180,1)"}},"textfont":{"color":"rgba(31,120,180,1)"},"error_y":{"color":"rgba(31,120,180,1)"},"error_x":{"color":"rgba(31,120,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[4862911,6387158,1624153,1681020,380879,621235,576475,1033643,569856,247382,210805,1306557,2124808,416987,235340,536141,126657.7,894934,107663,131986,207106,273432,296520.2,238651.1,214153,342454,471039,73010],"type":"bar","name":"Vessel sources, total","marker":{"color":"rgba(178,223,138,1)","line":{"color":"rgba(178,223,138,1)"}},"textfont":{"color":"rgba(178,223,138,1)"},"error_y":{"color":"rgba(178,223,138,1)"},"error_x":{"color":"rgba(178,223,138,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p><a href="https://www.epa.gov/enforcement/deepwater-horizon-bp-gulf-mexico-oil-spill#:~:text=On%20April%2020%2C%202010%2C%20the,of%20marine%20oil%20drilling%20operations." class="external-link">“On April 20, 2010, the oil drilling rig Deepwater Horizon, operating in the Macondo Prospect in the Gulf of Mexico, exploded and sank resulting in the death of 11 workers on the Deepwater Horizon and the largest spill of oil in the history of marine oil drilling operations.”</a></p>
</div>
<div class="section level3">
<h3 id="incidents">Incidents<a class="anchor" aria-label="anchor" href="#incidents"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">oilSpills</span> |&gt; <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Source</span> <span class="op">==</span> <span class="st">"Vessel sources, total"</span><span class="op">|</span> 
                     <span class="va">Source</span> <span class="op">==</span> <span class="st">"Nonvessel sources, total"</span><span class="op">|</span>
                     <span class="va">Source</span> <span class="op">==</span> <span class="st">"Mysteryc"</span><span class="op">)</span>  |&gt;
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html" class="external-link">add_trace</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="va">Year</span>, y <span class="op">=</span> <span class="op">~</span><span class="va">Incidents</span>, type <span class="op">=</span> <span class="st">'scatter'</span>, color <span class="op">=</span><span class="op">~</span><span class="va">Source</span>, mode <span class="op">=</span> <span class="st">'lines+markers'</span>, 
            colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#a6cee3"</span>, <span class="st">"#1f78b4"</span>, <span class="st">"#b2df8a"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-149256e3e98933018bcf" style="width:1000px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-149256e3e98933018bcf">{"x":{"visdat":{"272933da3382d":["function () ","plotlyVisDat"]},"cur_data":"272933da3382d","attrs":{"272933da3382d":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","color":{},"mode":"lines+markers","colors":["#a6cee3","#1f78b4","#b2df8a"],"inherit":true}},"layout":{"width":1000,"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Incidents"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1705,3108,2444,2671,1921,1590,1244,1149,1073,1395,1337,1055,900,933,647,608,680,492,375,394,454,398,397,220,195,170,153,125],"type":"scatter","mode":"lines+markers","name":"Mysteryc","marker":{"color":"rgba(166,206,227,1)","line":{"color":"rgba(166,206,227,1)"}},"textfont":{"color":"rgba(166,206,227,1)"},"error_y":{"color":"rgba(166,206,227,1)"},"error_x":{"color":"rgba(166,206,227,1)"},"line":{"color":"rgba(166,206,227,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[2802,2584,1116,1078,1356,1553,1615,1645,1465,1286,1140,1137,1146,1258,1233,1148,979,1008,1159,1048,1048,963,931,943,887,687,1283,910],"type":"scatter","mode":"lines+markers","name":"Nonvessel sources, total","marker":{"color":"rgba(31,120,180,1)","line":{"color":"rgba(31,120,180,1)"}},"textfont":{"color":"rgba(31,120,180,1)"},"error_y":{"color":"rgba(31,120,180,1)"},"error_x":{"color":"rgba(31,120,180,1)"},"line":{"color":"rgba(31,120,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[1662,2485,5478,5586,5347,5172,5680,5560,5021,1816,1715,1705,1835,1993,1928,1644,1645,1508,1531,1824,1721,1716,1545,1500,1390,1977,1572,1284],"type":"scatter","mode":"lines+markers","name":"Vessel sources, total","marker":{"color":"rgba(178,223,138,1)","line":{"color":"rgba(178,223,138,1)"}},"textfont":{"color":"rgba(178,223,138,1)"},"error_y":{"color":"rgba(178,223,138,1)"},"error_x":{"color":"rgba(178,223,138,1)"},"line":{"color":"rgba(178,223,138,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="source-incidents-and-gallons-spilled">Source, Incidents, and Gallons Spilled<a class="anchor" aria-label="anchor" href="#source-incidents-and-gallons-spilled"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  overlaying <span class="op">=</span> <span class="st">"y"</span>,
  side <span class="op">=</span> <span class="st">"right"</span>,
  title <span class="op">=</span> <span class="st">"Number of Incidents"</span>,
  automargin <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>

<span class="va">oilSpills</span> |&gt; <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Source</span> <span class="op">!=</span> <span class="st">"TOTAL all spills"</span>, 
                     <span class="va">Source</span> <span class="op">!=</span> <span class="st">"Vessel sources, total"</span>, 
                     <span class="va">Source</span> <span class="op">!=</span> <span class="st">"Nonvessel sources, total"</span><span class="op">)</span>  |&gt;
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="op">)</span> |&gt;
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Source <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">Source</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">`Gallons spilled`</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plot_ly</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="va">Year</span>, y <span class="op">=</span><span class="op">~</span><span class="va">`Gallons spilled`</span>, color <span class="op">=</span> <span class="op">~</span><span class="va">Source</span>, type<span class="op">=</span><span class="st">"bar"</span>, colors <span class="op">=</span> <span class="st">"Accent"</span>,
          width <span class="op">=</span> <span class="fl">1000</span>, height <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> |&gt;
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Year</span><span class="op">)</span> |&gt;
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Incidents</span><span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/add_trace.html" class="external-link">add_trace</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="va">Year</span>, y <span class="op">=</span> <span class="op">~</span><span class="va">n</span>, type <span class="op">=</span> <span class="st">'scatter'</span>,  mode <span class="op">=</span> <span class="st">'markers'</span>, 
            name <span class="op">=</span> <span class="st">"Incidents"</span>, yaxis <span class="op">=</span> <span class="st">"y2"</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html" class="external-link">layout</a></span><span class="op">(</span>yaxis2 <span class="op">=</span> <span class="va">y2</span>,
         yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fixedrange <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
          updatemenus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
              type <span class="op">=</span> <span class="st">"buttons"</span>,
              x <span class="op">=</span> <span class="fl">0.6</span>,
              y <span class="op">=</span> <span class="fl">1</span>,
              direction <span class="op">=</span> <span class="st">"right"</span>,
              buttons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
                
                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"relayout"</span>,
                args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"barmode"</span>,<span class="st">"dodge"</span><span class="op">)</span>,
                label <span class="op">=</span> <span class="st">"Grouped"</span><span class="op">)</span>,

                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"relayout"</span>,
                args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"barmode"</span>,<span class="st">"stack"</span><span class="op">)</span>,
                label <span class="op">=</span> <span class="st">"Stacked"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/rangeslider.html" class="external-link">rangeslider</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-d85123096ee61256af60" style="width:1000px;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d85123096ee61256af60">{"x":{"visdat":{"272937377f50c":["function () ","plotlyVisDat"],"272931414f815":["function () ","data"],"272935202ea66":["function () ","data"]},"cur_data":"272935202ea66","attrs":{"272937377f50c":{"x":{},"y":{},"color":{},"colors":"Accent","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"272935202ea66":{"x":{},"y":{},"color":["black"],"colors":"Accent","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"markers","name":"Incidents","yaxis":"y2","inherit":true}},"layout":{"width":1000,"height":500,"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"rangeslider":{"visible":true},"title":"Year"},"yaxis2":{"overlaying":"y","side":"right","title":"Number of Incidents","automargin":true},"yaxis":{"domain":[0,1],"automargin":true,"fixedrange":false,"title":"`Gallons spilled`"},"updatemenus":[{"type":"buttons","x":0.6,"y":1,"direction":"right","buttons":[{"method":"relayout","args":["barmode","dodge"],"label":"Grouped"},{"method":"relayout","args":["barmode","stack"],"label":"Stacked"}]}],"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[2473212,1091544,946328,429911,277143,198853,515241,356740,256946,200871,78563,55456,7635181,2288574,144558,182716,52618.8,206804514,93072,50789,278485,381083,62552.9999999999,50178.7,22101,187579,225984,107211],"type":"bar","name":"Otherb","marker":{"color":"rgba(127,201,127,1)","line":{"color":"rgba(127,201,127,1)"}},"textfont":{"color":"rgba(127,201,127,1)"},"error_y":{"color":"rgba(127,201,127,1)"},"error_x":{"color":"rgba(127,201,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[446966,417882,396724,298451,192801,316473,409084,291927,232341,212410,103481,453901,115058,125352,184093,248167,107816.1,472386,90109,94854,186827,73619,148286.2,119070.3,129734,299574,291929,54782],"type":"bar","name":"Other vesselsa","marker":{"color":"rgba(190,174,212,1)","line":{"color":"rgba(190,174,212,1)"}},"textfont":{"color":"rgba(190,174,212,1)"},"error_y":{"color":"rgba(190,174,212,1)"},"error_x":{"color":"rgba(190,174,212,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[3683548,992025,1101938,1163258,165649,248089,158977,133540,212298,30219,102874,215822,2006774,287343,4516,286637,4424.3,965,15852,33268,19568,199667,1146.6,87416.3,84319,41360,131400,17592],"type":"bar","name":"Tank barge","marker":{"color":"rgba(253,192,134,1)","line":{"color":"rgba(253,192,134,1)"}},"textfont":{"color":"rgba(253,192,134,1)"},"error_y":{"color":"rgba(253,192,134,1)"},"error_x":{"color":"rgba(253,192,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[323108,119377,55854,28508,60430,17352,44593,23966,14141,190630,96819,39700,30126,128517,30279,26564,30667.4,8718,7849,13157,6091,8581,1934.5,3753.9,4868,1288,13284,506],"type":"bar","name":"Mysteryc","marker":{"color":"rgba(255,255,153,1)","line":{"color":"rgba(255,255,153,1)"}},"textfont":{"color":"rgba(255,255,153,1)"},"error_y":{"color":"rgba(255,255,153,1)"},"error_x":{"color":"rgba(255,255,153,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[732397,4977251,125491,219311,22429,56673,8414,608176,125217,4753,4450,636834,2976,4292,46731,1337,14417.3,421583,1702,3864,711,146,147087.4,32164.5,100,1520,47710,636],"type":"bar","name":"Tankship","marker":{"color":"rgba(56,108,176,1)","line":{"color":"rgba(56,108,176,1)"}},"textfont":{"color":"rgba(56,108,176,1)"},"error_y":{"color":"rgba(56,108,176,1)"},"error_x":{"color":"rgba(56,108,176,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006],"y":[759040,270700,10751,978006,223312,47020,433,17004,12336,0,0,15000,110000,510],"type":"bar","name":"Onshore pipelines","marker":{"color":"rgba(240,2,127,1)","line":{"color":"rgba(240,2,127,1)"}},"textfont":{"color":"rgba(240,2,127,1)"},"error_y":{"color":"rgba(240,2,127,1)"},"error_x":{"color":"rgba(240,2,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[17977,46228,1143,386,810,843,35707,17,1241,0,14952,0,26465,1719,295165,14809,1656.6,4627,1687,251,6028,5267,474.3,9139.4,83,17306,4109,548],"type":"bar","name":"Offshore pipelines","marker":{"color":"rgba(191,91,23,1)","line":{"color":"rgba(191,91,23,1)"}},"textfont":{"color":"rgba(191,91,23,1)"},"error_y":{"color":"rgba(191,91,23,1)"},"error_x":{"color":"rgba(191,91,23,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1985,1990,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[6169,8177,9038,9335,8624,8315,8539,8354,7559,4497,4192,3897,3881,4184,3808,3400,3304,3008,3065,3266,3223,3077,2873,2663,2472,2664,2513,2194],"type":"scatter","mode":"markers","name":"Incidents","yaxis":"y2","marker":{"color":"rgba(0,0,0,1)","line":{"color":"rgba(0,0,0,1)"}},"textfont":{"color":"rgba(0,0,0,1)"},"error_y":{"color":"rgba(0,0,0,1)"},"error_x":{"color":"rgba(0,0,0,1)"},"line":{"color":"rgba(0,0,0,1)"},"xaxis":"x","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p><a href="https://nacnudus.github.io/spreadsheet-munging-strategies/pivot-simple.html#two-clear-rows-of-text-column-headers-left-aligned" class="external-link">unpivotr</a></p></li>
<li><p><a href="https://www.rdocumentation.org/packages/unpivotr/versions/0.6.2/topics/behead" class="external-link">behead function</a></p></li>
<li><p><a href="https://cran.r-project.org/web/packages/tidyxl/vignettes/tidyxl.html%60" class="external-link">tidyxl</a></p></li>
<li><p><a href="https://stackoverflow.com/questions/62875576/zoom-on-y-axis-while-using-plotlyrangeslider" class="external-link">range slider</a></p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tomoki Takeuchi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
